(this["webpackJsonpstory-club"]=this["webpackJsonpstory-club"]||[]).push([[0],{11:function(e,t,a){e.exports=a.p+"static/media/sprite.417b38a5.svg"},43:function(e,t,a){e.exports=a(72)},52:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),c=a.n(o),l=a(16),s=a(3),i=a(41),u=a(14),m=(a(52),a(4)),d=a(2),f=a(18),p=a.n(f),E=function(e,t,a){return{type:"AUTH_SUCCESS",idToken:e,userId:t,userName:a}},g=function(e){return{type:"AUTH_FAIL",error:e}},v=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),localStorage.removeItem("userName"),{type:"AUTH_LOGOUT"}},b=function(e){return function(t){setTimeout((function(){t(v())}),1e3*e)}},y=function(e){var t=e.email,a=e.password,n=e.isSignup,r=e.fullName;return function(e){e({type:"AUTH_START"});var o={displayName:r,email:t,password:a,returnSecureToken:!0},c="https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyBzOU2zSdEfJJ2fBMR3piZK9jH_q6g9nPQ";n||(c="https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBzOU2zSdEfJJ2fBMR3piZK9jH_q6g9nPQ"),p.a.post(c,o).then((function(t){var a=new Date((new Date).getTime()+1e3*t.data.expiresIn);if(localStorage.setItem("token",t.data.idToken),localStorage.setItem("expirationDate",a),localStorage.setItem("userId",t.data.localId),localStorage.setItem("userName",t.data.displayName),e(E(t.data.idToken,t.data.localId)),e(b(t.data.expiresIn)),n){var o={fullName:r,coverQuote:"cannot praise yourself ...",bio:"Works at XYZ Company",location:"Enter Your Location",userId:t.data.localId};p.a.post("https://storyclub-734f8.firebaseio.com/users.json?auth="+t.data.idToken,o).then((function(e){})).catch((function(e){console.log(e)}))}})).catch((function(t){t.response?e(g(t.response.data.error.message)):e(g(t.message))}))}},h=a(5),S=p.a.create({baseURL:"https://storyclub-734f8.firebaseio.com/"}),O=function(e){return function(t){t({type:"FETCHING_STORY_START"}),S.get("/stories.json?auth="+e).then((function(e){var a;t((a=e.data,{type:"FETCHING_STORY_SUCCESS",stories:Object.keys(a).map((function(e){return Object(h.a)({},a[e],{userStoryId:e})}))}))})).catch((function(e){t(function(e){return{type:"FETCHING_STORY_FAIL",error:e}}(e))}))}},N=function(e,t){return function(a){a({type:"FETCH_USER_STORY_START"}),a({type:"FETCH_USER_DATA_START"});var n="?auth="+t+'&orderBy="userId"&equalTo="'+e+'"';S.get("/stories.json"+n).then((function(e){var t;a((t=e.data,{type:"FETCH_USER_STORY_SUCCESS",userStory:Object.keys(t).map((function(e){return Object(h.a)({},t[e],{userStoryId:e})}))}))})).catch((function(e){console.log(e),a(function(e){return{type:"FETCH_USER_STORY_FAIL",userStoryError:e}}(e))})),S.get("/users.json"+n).then((function(e){var t;a((t=e.data,{type:"FETCH_USER_DATA_SUCCESS",userData:Object.keys(t).map((function(e){return Object(h.a)({},t[e],{userDataId:e})}))[0]}))})).catch((function(e){console.log(e),a(function(e){return{type:"FETCH_USER_DATA_FAIL",userDataError:e}}(e))}))}},I=function(e){return{type:"POSTING_STORY_FAIL",error:e}},T=function(e,t,a){return function(n){S.patch("users/"+e+".json?auth="+t,a).then((function(e){var t=Object(h.a)({},a);n({type:"UPDATED_PROFILE",updatedProfile:t})})).catch((function(e){console.log(e)}))}};var _=Object(s.b)((function(e){return{error:e.auth.error}}),(function(e){return{login:function(t){return e(y(t))}}}))((function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(""),s=Object(d.a)(l,2),i=s[0],u=s[1];return r.a.createElement("div",{className:"box-layout__box"},r.a.createElement("h1",{className:"heading-1 title"},"Story Club"),r.a.createElement("p",{className:"heading-3"},"Get Started - It's free"),r.a.createElement("p",{className:"error"},e.error),r.a.createElement("form",{className:"form",onSubmit:function(t){t.preventDefault();var a={email:o,password:i,isSignup:!1};e.login(a)}},r.a.createElement("input",{className:"text-input",placeholder:"E-mail",email:"email",value:o,type:"email",onChange:function(e){c(e.target.value)}}),r.a.createElement("input",{className:"text-input",placeholder:"Password",password:"password",value:i,type:"password",onChange:function(e){u(e.target.value)}}),r.a.createElement("button",{className:"btn-primary"},"Login")),r.a.createElement("div",{className:"heading-3"},"Need an account? \xa0",r.a.createElement("span",null,r.a.createElement("button",{className:"simple-text-button",onClick:e.loginToogle},"sign up"))))}));var j=Object(s.b)((function(e){return{error:e.auth.error}}),(function(e){return{signup:function(t){return e(y(t))}}}))((function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(""),s=Object(d.a)(l,2),i=s[0],u=s[1],m=Object(n.useState)(""),f=Object(d.a)(m,2),p=f[0],E=f[1],g=Object(n.useState)(""),v=Object(d.a)(g,2),b=v[0],y=v[1],h=Object(n.useState)(null),S=Object(d.a)(h,2),O=S[0],N=S[1],I=e.error;return Object(n.useEffect)((function(){N(I)}),[I]),r.a.createElement("div",{className:"box-layout__box"},r.a.createElement("h1",{className:"heading-1 title"},"Story Club"),r.a.createElement("p",{className:"heading-3"},"Get Started - It's free"),r.a.createElement("p",{className:"error"},O),r.a.createElement("form",{className:"form",onSubmit:function(t){t.preventDefault();var a={fullName:o,email:i,password:p,confirmPassword:b,isSignup:!0};p===b&&""!==o.trim()?e.signup(a):N(p!==b?"Password doesn't match":"Please enter your name")}},r.a.createElement("input",{className:"text-input",placeholder:"Full Name",fullname:"fullName",value:o,type:"text",onChange:function(e){c(e.target.value)}}),r.a.createElement("input",{className:"text-input",placeholder:"E-mail",email:"email",value:i,type:"email",onChange:function(e){u(e.target.value)}}),r.a.createElement("input",{className:"text-input",placeholder:"Password",password:"password",value:p,type:"password",onChange:function(e){E(e.target.value)}}),r.a.createElement("input",{className:"text-input",placeholder:"Confirm Password",confirmpassword:"confirmPassword",value:b,type:"password",onChange:function(e){y(e.target.value)}}),r.a.createElement("button",{className:"btn-primary"},"Sign Up")),r.a.createElement("div",{className:"heading-3"},"Already have an account? \xa0",r.a.createElement("span",null,r.a.createElement("button",{className:"simple-text-button",onClick:e.loginToogle},"Login"))))})),C=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],o=t[1],c=function(){o(!a)},l=r.a.createElement(j,{loginToogle:c});return a&&(l=r.a.createElement(_,{loginToogle:c})),r.a.createElement("div",{className:"box-layout"},l)},k=a(11),D=a.n(k);var U=function(e){return r.a.createElement("div",{className:"story-card",onClick:e.postEditor},r.a.createElement("div",{className:"story-card__title",onClick:e.postEditor},e.card.title),e.userId===e.card.userId?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"icon-button",onClick:e.postEditor},r.a.createElement("svg",{className:"icon__delete"},r.a.createElement("use",{href:D.a+"#icon-trash-can"}))),r.a.createElement("button",{className:"icon-button",onClick:e.postEditor},r.a.createElement("svg",{className:"icon__edit"},r.a.createElement("use",{href:D.a+"#icon-document-edit"})))):r.a.createElement("div",{onClick:e.postEditor}),r.a.createElement("div",{className:"story-card__body",onClick:e.postEditor},e.card.body),r.a.createElement("button",{className:"written-by story-card__by",onClick:e.profileViewer},r.a.createElement("div",{className:""},"by-",e.card.userName,"\xa0")))},w=function(){return r.a.createElement("div",{className:"lds-roller"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))},P=a(12),R=a(42);var A=Object(s.b)((function(e){return{loading:e.modal.loading,error:e.modal.error,show:e.modal.show,token:e.auth.token,userId:e.auth.userId,userName:e.auth.userName}}),(function(e){return{postStory:function(t,a){return e(function(e,t){return function(a){a({type:"POSTING_STORY_START"}),S.post("/stories.json?auth="+t,e).then((function(t){var n=Object(h.a)({},e,{userStoryId:t.data.name});a({type:"POSTING_STORY_SUCCESS"}),a(function(e){return{type:"ADDED_STORY",addedPost:e}}(n))})).catch((function(e){console.log(e),a(I(e))}))}}(t,a))},deletePost:function(t,a){return e(function(e,t){return function(a){a({type:"POSTING_STORY_START"}),S.delete("/stories/"+e+".json?auth="+t).then((function(t){a({type:"POSTING_STORY_SUCCESS"}),a(function(e){return{type:"DELETED_STORY",storyId:e}}(e))})).catch((function(e){a(I(e))}))}}(t,a))},editPost:function(t,a,n){return e(function(e,t,a){return function(n){n({type:"POSTING_STORY_START"}),S.patch("/stories/"+t+".json?auth="+a,e).then((function(a){var r=Object(h.a)({},e,{userStoryId:t});n({type:"POSTING_STORY_SUCCESS"}),n(function(e){return{type:"UPDATED_STORY",updatedStory:e}}(r))})).catch((function(e){n(I(e))}))}}(t,a,n))},closeModal:function(){return e({type:"MODAL_CLOSE"})}}}))((function(e){var t=Object(n.useState)({title:e.card.title,body:e.card.body,privacy:e.card.privacy,type:e.type}),a=Object(d.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(null),s=Object(d.a)(l,2),i=s[0],u=s[1],m=function(e,t){c(Object(h.a)({},o,Object(P.a)({},t,e.target.value)))},f=function(e){c(Object(h.a)({},o,{privacy:e.target.checked}))},p=function(){var t={title:o.title,body:o.body,privacy:o.privacy,userId:e.userId,userName:e.userName};!function(){var e=!0;return""!==o.title.trim()&&""!==o.body.trim()||(e=!1),e}()?u(r.a.createElement("p",{className:"error-modal"},"One or more fields are empty.")):(u(null),"newPost"===e.type?e.postStory(t,e.token):"editPost"===e.type&&e.editPost(t,e.card.userStoryId,e.token))},E=function(){e.deletePost(e.card.userStoryId,e.token)},g=e.userId===e.card.userId?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"delete-post",onClick:E},"delete")):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"delete-post",onClick:E,style:{visibility:"hidden"}},"delete")),v=e.userId===e.card.userId?r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,"Keep private \xa0"),r.a.createElement("input",{type:"checkbox",checked:o.privacy,onChange:function(e){return f(e)}})):r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{style:{visibility:"hidden"}},"Keep private \xa0"),r.a.createElement("input",{style:{visibility:"hidden"},type:"checkbox",checked:o.privacy,onChange:function(e){return f(e)}})),b=e.userId===e.card.userId?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"submit-post",onClick:p},"post")):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"submit-post",style:{visibility:"hidden"},onClick:p},"post"));return"newPost"===e.type&&(g=r.a.createElement("button",{className:"delete-post",style:{visibility:"hidden"},onClick:E},"delete"),v=r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,"Keep private \xa0"),r.a.createElement("input",{type:"checkbox",checked:o.privacy,onChange:function(e){return f(e)}})),b=r.a.createElement("button",{className:"submit-post",onClick:p},"post")),r.a.createElement("div",{className:"box"},e.show?r.a.createElement("div",{className:"backdrop",onClick:e.closeModal,style:{opacity:e.show?"1":"0",transition:"opacity 1s linear"}}):null,e.show?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"storyModal",style:{opacity:e.show?"1":"0",transition:"opacity 1s linear"}},i,e.loading?r.a.createElement(w,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement("input",{className:"modal-title",placeholder:"Name of your Story",value:o.title,onChange:function(e){return m(e,"title")}}),r.a.createElement(R.a,{className:"modal-body",placeholder:"text",value:o.body,minRows:5,maxRows:25,onChange:function(e){return m(e,"body")}})),r.a.createElement("div",{className:"modal-footer"},v,g,b,r.a.createElement("button",{className:"close-post",onClick:function(){return e.closeModal()}},"close"))))):null)})),F=function(e){return e.show?r.a.createElement("div",{className:"backdrop",onClick:e.clicked}):null},x=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(F,{show:e.show,clicked:e.modalClosed}),r.a.createElement("div",{className:"Modal",style:{transform:e.show?"translateY(0)":"translateY(-100vh)",opacity:e.show?"1":"0"}},e.children))},H=function(e,t){return function(a){var o=function(e){var t=Object(n.useState)(null),a=Object(d.a)(t,2),r=a[0],o=a[1],c=e.interceptors.request.use((function(e){return o(null),e})),l=e.interceptors.response.use((function(e){return e}),(function(e){return o(e),Promise.reject(e)}));Object(n.useEffect)((function(){return function(){e.interceptors.request.eject(c),e.interceptors.response.eject(l)}}),[c,l,e]);return[r,function(){o(null)}]}(t),c=Object(d.a)(o,2),l=c[0],s=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{show:l,modalClosed:s},l?l.message:null),r.a.createElement(e,a))}};var L=Object(s.b)((function(e){return{loading:e.stories.loading,storiesArray:e.stories.stories,token:e.auth.token,userId:e.auth.userId,storyModalReset:e.modal.show}}),(function(e){return{fetchStories:function(t){return e(O(t))},storyModalOpen:function(){return e({type:"MODAL_OPEN"})}}}))(H((function(e){var t=Object(n.useState)(null),a=Object(d.a)(t,2),o=a[0],c=a[1],l=e.fetchStories,s=e.token,i=function(t){e.history.push("/profile/"+t)},u=function(t,a){c(r.a.createElement(A,{type:t,card:a})),e.storyModalOpen()};Object(n.useEffect)((function(){l(s)}),[l,s]);var m=Object(n.useState)([]),f=Object(d.a)(m,2),p=f[0],E=f[1],g=e.storiesArray;Object(n.useEffect)((function(){E(g)}),[g]);var v=null,b=[],y=[],h=[];if(0!==p.length){var S=p.filter((function(e){return!1===e.privacy}));S.forEach((function(t,a){var n=function(e){var t,a,n,r=e.length,o=r/3,c=r-3*Math.floor(r/3);return t=a=o,1===c?t+=1:2===c&&(t+=1,a+=1),{fe:n=t-1,ss:n+1,se:n+a}}(S),o=n.fe,c=n.ss,l=n.se;a<=o?b.push(r.a.createElement(U,{key:t.title+a,postEditor:function(){return u("editPost",t)},profileViewer:function(){return i(t.userId)},card:t,userId:e.userId})):a<=l&&a>=c?y.push(r.a.createElement(U,{key:t.title+a,postEditor:function(){return u("editPost",t)},profileViewer:function(){return i(t.userId)},card:t,userId:e.userId})):h.push(r.a.createElement(U,{key:t.title+a,postEditor:function(){return u("editPost",t)},profileViewer:function(){return i(t.userId)},card:t,userId:e.userId}))}))}return 0===p.length&&(v=r.a.createElement("h1",null,"No Post Found")),r.a.createElement(r.a.Fragment,null,e.loading?r.a.createElement("div",{className:"stories-spinner"},r.a.createElement(w,null)):r.a.createElement(r.a.Fragment,null,e.storyModalReset?o:null,r.a.createElement("div",{className:"introHeader"},r.a.createElement("h1",{className:"heading-1 intro"},"Everone Has Story to Tell"),r.a.createElement("h3",{className:"line"},"Show your story to world"),r.a.createElement("button",{className:"btn-primary pro-btn",onClick:function(){var t=e.userId;e.history.push("/profile/"+t)}},"Veiw Profile")),r.a.createElement("div",{className:"container-header"},"Public Stories"),r.a.createElement("div",{className:"grid-container"},v,r.a.createElement("div",{className:"stories"},b),r.a.createElement("div",{className:"stories"},y),r.a.createElement("div",{className:"stories"},h))))}),S));var Y=function(e){return r.a.createElement("div",{className:"profile-edit-form"},r.a.createElement("input",{className:"profile-input",type:"text",onChange:e.onChange,value:e.value}),r.a.createElement("div",{className:"profile-input-button-box"},r.a.createElement("button",{className:"profile-input-button",onClick:e.cancel},"Cancel"),r.a.createElement("button",{className:"profile-input-button",onClick:e.save},"Save")))},M=a(22),G=a.n(M);a(73);G.a.initializeApp({apiKey:"AIzaSyBzOU2zSdEfJJ2fBMR3piZK9jH_q6g9nPQ",authDomain:"storyclub-734f8.firebaseapp.com",databaseURL:"https://storyclub-734f8.firebaseio.com",projectId:"storyclub-734f8",storageBucket:"storyclub-734f8.appspot.com",messagingSenderId:"711083344387",appId:"1:711083344387:web:254d76e701958f3b45c436",measurementId:"G-6ST820T6GL"});var Q=G.a.storage(),B=Object(s.b)((function(e){return{token:e.auth.token,loggedInUser:e.auth.userId,userDataId:e.stories.userData.userDataId,userId:e.stories.userData.userId,image:e.stories.userData.userPic}}),(function(e){return{updateProfilePic:function(t,a,n){return e(T(t,a,n))}}}))((function(e){var t=Object(n.useState)(),a=Object(d.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(),s=Object(d.a)(l,2),i=s[0],u=s[1],m=e.userId,f=e.token,p=e.updateProfilePic,E=e.loggedInUser,g=e.userDataId,v=e.image,b=Object(n.useRef)(),y=Object(n.useCallback)((function(){Q.ref("images/".concat(i.name)).put(i).on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){Q.ref("images").child(i.name).getDownloadURL().then((function(e){p(g,f,{userPic:e})}))}))}),[f,p,g,i]);return Object(n.useEffect)((function(){if(i){var e=new FileReader;e.onload=function(){c(e.result)},e.readAsDataURL(i),y()}}),[i,y]),r.a.createElement("div",{className:"user-profile"},r.a.createElement("div",{className:"user-image"},v&&r.a.createElement("img",{src:v,alt:"User Pic"}),o&&r.a.createElement("img",{src:o,alt:"Preview"}),o||v?null:r.a.createElement("svg",{className:"icon-user"},r.a.createElement("use",{href:D.a+"#icon-user"})),r.a.createElement("input",{id:e.id,ref:b,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg",onChange:function(e){var t;e.target.files&&1===e.target.files.length&&(t=e.target.files[0],u(t))}}),E===m?r.a.createElement("button",{className:"img-button",onClick:function(){b.current.click()}},r.a.createElement("div",{className:"image"},r.a.createElement("svg",{className:"icon-image"},r.a.createElement("use",{href:D.a+"#icon-image"})),r.a.createElement("p",{className:"caption"},"Upload Profile pic"))):null))}));var z=Object(s.b)((function(e){return{loggedInUserId:e.auth.userId,token:e.auth.token,stories:e.stories.stories,loadingUserStory:e.stories.loadingUserStory,loadingUserData:e.stories.loadingUserData,userData:e.stories.userData,errorUserStory:e.stories.errorUserStory,errorUserData:e.stories.errorUserData,storyModalReset:e.modal.show}}),(function(e){return{fetchUserProfile:function(t,a){return e(N(t,a))},editProfile:function(t,a,n){return e(T(t,a,n))},storyModalOpen:function(){return e({type:"MODAL_OPEN"})}}}))(H((function(e){var t=Object(n.useState)({coverQuote:"",bio:"",location:"",coverQuotePrev:"",bioPrev:"",locationPrev:"",coverQuoteDisplay:!1,bioDisplay:!1,locationDisplay:!1}),a=Object(d.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(null),s=Object(d.a)(l,2),i=s[0],u=s[1],m=function(e){var t=e+"Display";c(Object(h.a)({},o,Object(P.a)({},t,!0)))},f=function(e,t){c(Object(h.a)({},o,Object(P.a)({},t,e.target.value)))},p=function(e){var t,a=e+"Display",n=e+"Prev";c(Object(h.a)({},o,(t={},Object(P.a)(t,a,!1),Object(P.a)(t,e,o[n]),t)))},E=function(t){var a=t+"Display";c(Object(h.a)({},o,Object(P.a)({},a,!1)));var n={coverQuote:o.coverQuote,bio:o.bio,location:o.location};e.editProfile(e.userData.userDataId,e.token,n)},g=function(){var t=e.loggedInUserId;e.history.push("/profile/"+t)},v=function(t,a){u(r.a.createElement(A,{type:t,card:a})),e.storyModalOpen()},b=e.fetchUserProfile,y=e.token,S=e.userData,O=e.loadingUserStory,N=e.loadingUserData,I=e.match.params.uid;Object(n.useEffect)((function(){b(I,y)}),[b,I,y]),Object(n.useEffect)((function(){N||O||c({coverQuote:S.coverQuote,bio:S.bio,location:S.location,coverQuotePrev:S.coverQuote,bioPrev:S.bio,locationPrev:S.location,coverQuoteDisplay:!1,bioDisplay:!1,locationDisplay:!1})}),[S,N,O]);var T=null,_=[],j=[],C=[];return e.loadingUserData||e.loadingUserStory||(e.stories.forEach((function(t,a){var n=function(e){var t,a,n,r=e.length,o=r/3,c=r-3*Math.floor(r/3);return t=a=o,1===c?t+=1:2===c&&(t+=1,a+=1),{fe:n=t-1,ss:n+1,se:n+a}}(e.stories),o=n.fe,c=n.ss,l=n.se;a<=o?_.push(r.a.createElement(U,{key:t.title+a,postEditor:function(){return v("editPost",t)},profileViewer:g,card:t,userId:e.loggedInUserId})):a<=l&&a>=c?j.push(r.a.createElement(U,{key:t.title+a,postEditor:function(){return v("editPost",t)},profileViewer:g,card:t,userId:e.loggedInUserId})):C.push(r.a.createElement(U,{key:t.title+a,postEditor:function(){return v("editPost",t)},profileViewer:g,card:t,userId:e.loggedInUserId}))})),0===e.stories.length&&(T=r.a.createElement("h1",null,"No Post Found"))),r.a.createElement(r.a.Fragment,null,e.storyModalReset?i:null,e.loadingUserData||e.loadingUserStory?r.a.createElement("div",{className:"stories-spinner"},r.a.createElement(w,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("div",{className:"introHeader"},o.coverQuoteDisplay?r.a.createElement(Y,{onChange:function(e){return f(e,"coverQuote")},value:o.coverQuote,cancel:function(){return p("coverQuote")},save:function(){return E("coverQuote")}}):r.a.createElement("div",{className:"header"},r.a.createElement("p",null,o.coverQuote),I===e.loggedInUserId?r.a.createElement("button",{className:"header-button",onClick:function(){return m("coverQuote")}},r.a.createElement("svg",{className:"icon-pencil"},r.a.createElement("use",{href:D.a+"#icon-pencil"}))):null)),r.a.createElement(B,null),r.a.createElement("div",{className:"sub-header"},r.a.createElement("div",{className:"sub-items"},r.a.createElement("h2",{className:"name"},e.userData.fullName),o.bioDisplay?r.a.createElement(Y,{onChange:function(e){return f(e,"bio")},value:o.bio,cancel:function(){return p("bio")},save:function(){return E("bio")}}):r.a.createElement("div",{className:"company"},r.a.createElement("p",null,o.bio),I===e.loggedInUserId?r.a.createElement("button",{className:"pencil-button",onClick:function(){return m("bio")}},r.a.createElement("svg",{className:"icon-pencil__edit"},r.a.createElement("use",{href:D.a+"#icon-pencil"}))):null),o.locationDisplay?r.a.createElement(Y,{onChange:function(e){return f(e,"location")},value:o.location,cancel:function(){return p("location")},save:function(){return E("location")}}):r.a.createElement("div",{className:"place"},r.a.createElement("p",null,o.location),I===e.loggedInUserId?r.a.createElement("button",{className:"pencil-button",onClick:function(){return m("location")}},r.a.createElement("svg",{className:"icon-pencil__edit"},r.a.createElement("use",{href:D.a+"#icon-pencil"}))):null)))),r.a.createElement("div",{className:"profile"},I===e.loggedInUserId?r.a.createElement("div",{className:"new-post",onClick:function(){u(r.a.createElement(A,{type:"newPost",card:{title:"",body:"",privacy:!1}})),e.storyModalOpen()}},r.a.createElement("input",{type:"text",placeholder:"Post New Story",className:"inputStyle"}),r.a.createElement("svg",{className:"pencil-new-post__edit"},r.a.createElement("use",{href:D.a+"#icon-pencil"}))):null,r.a.createElement("div",{className:"container-header"},"Recent Posts"),r.a.createElement("div",{className:"grid-container"},T,r.a.createElement("div",{className:"stories"},_),r.a.createElement("div",{className:"stories"},j),r.a.createElement("div",{className:"stories"},C)))))}),S)),V=a(23),J=Object(s.b)((function(e){return{isAuthenticated:null!=e.auth.token}}))((function(e){var t=e.isAuthenticated,a=e.component,n=Object(V.a)(e,["isAuthenticated","component"]);return r.a.createElement("div",null,r.a.createElement(m.b,Object.assign({},n,{component:function(e){return t?r.a.createElement(m.a,{to:"/home"}):r.a.createElement(a,e)}})))}));var K=Object(s.b)(null,(function(e){return{logout:function(){return e(v())}}}))((function(e){return r.a.createElement("div",{className:"navigation"},r.a.createElement("button",{className:"home-button heading-1",onClick:function(){e.history.push("/home")}},"Storyclub"),r.a.createElement("button",{className:"simple-text-button logout-button heading-3",onClick:function(){e.logout(),e.history.push("/")}},"logout"))})),q=Object(s.b)((function(e){return{isAuthenticated:null!=e.auth.token}}))((function(e){var t=e.isAuthenticated,a=e.component,n=Object(V.a)(e,["isAuthenticated","component"]);return r.a.createElement("div",null,r.a.createElement(m.b,Object.assign({},n,{component:function(e){return t?r.a.createElement("div",null,r.a.createElement(K,e),r.a.createElement(a,e)):r.a.createElement(m.a,{to:"/"})}})))}));var W=function(e){return r.a.createElement("div",{className:"text"},r.a.createElement("b",null," 404-Page Not Found"),r.a.createElement("button",{className:"redirectButton",onClick:function(){return e.history.push("/home")}},"Go To Homepage"))};var Z=Object(s.b)(null,(function(e){return{onTryAutoSignup:function(){return e((function(e){var t=localStorage.getItem("token");if(t){var a=new Date(localStorage.getItem("expirationDate"));if(a<=new Date)e(v());else{var n=localStorage.getItem("userId"),r=localStorage.getItem("userName");e(E(t,n,r)),e(b((a.getTime()-(new Date).getTime())/1e3))}}else e(v())}))}}}))((function(e){(0,e.onTryAutoSignup)();var t=r.a.createElement(m.d,null,r.a.createElement(J,{path:"/",exact:!0,component:C}),r.a.createElement(q,{path:"/home",exact:!0,component:L}),r.a.createElement(q,{path:"/profile/:uid",exact:!0,component:z}),r.a.createElement(q,{path:"/StoryClub",exact:!0,component:L}),r.a.createElement(m.b,{component:W}));return r.a.createElement("div",null,t)}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=function(e,t){return Object(h.a)({},e,{},t)},$={loading:!1,error:null,show:!1},ee=function(e,t){return X(e,{loading:!0,error:null})},te=function(e,t){return X(e,{loading:!1,show:!1})},ae=function(e,t){return X(e,{loading:!1,error:t.error})},ne=function(e,t){return X(e,{show:!1})},re=function(e,t){return X(e,{show:!0})},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"POSTING_STORY_START":return ee(e);case"POSTING_STORY_SUCCESS":return te(e);case"POSTING_STORY_FAIL":return ae(e,t);case"MODAL_CLOSE":return ne(e);case"MODAL_OPEN":return re(e);default:return e}},ce={token:null,userId:null,error:null,loading:!1,userName:null},le=function(e,t){return X(e,{error:null,loading:!0})},se=function(e,t){return X(e,{error:t.error,loading:!1})},ie=function(e,t){return X(e,{token:t.idToken,userId:t.userId,userName:t.userName,error:null,loading:!1})},ue=function(e,t){return X(e,{token:null,userId:null})},me=function(e,t){return X(e,{})},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return le(e);case"AUTH_SUCCESS":return ie(e,t);case"AUTH_FAIL":return se(e,t);case"AUTH_LOGOUT":return ue(e);case"AUTH_REDIRECT_PATH":return me(e);default:return e}},fe={loading:!0,error:null,stories:[],userData:null,loadingUserData:!0,loadingUserStory:!0,errorUserData:null,errorUserStory:null},pe=function(e,t){return X(e,{loading:!0})},Ee=function(e,t){return X(e,{stories:t.stories,loading:!1})},ge=function(e,t){return X(e,{loading:!1,error:t.error})},ve=function(e,t){return X(e,{loadingUserData:!1,userData:t.userData})},be=function(e,t){return X(e,{loadingUserStory:!1,stories:t.userStory})},ye=function(e,t){return X(e,{errorUserData:t.userDataError})},he=function(e,t){return X(e,{loadingUserStory:!1,errorUserStory:t.userStoryError})},Se=function(e,t){return X(e,{loadingUserData:!0})},Oe=function(e,t){return X(e,{loadingUserStory:!0})},Ne=function(e,t){var a=e.stories.map((function(e){return t.updatedStory.userStoryId===e.userStoryId?t.updatedStory:e}));return X(e,{stories:a})},Ie=function(e,t){var a=e.stories.concat(t.addedPost);return X(e,{stories:a})},Te=function(e,t){var a=e.stories.filter((function(e){return e.userStoryId!==t.storyId}));return X(e,{stories:a})},_e=function(e,t){var a=Object(h.a)({},e.userData,{},t.updatedProfile);return X(e,{userData:a})},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCHING_STORY_START":return pe(e);case"FETCHING_STORY_SUCCESS":return Ee(e,t);case"FETCHING_STORY_FAIL":return ge(e,t);case"FETCH_USER_DATA_SUCCESS":return ve(e,t);case"FETCH_USER_STORY_SUCCESS":return be(e,t);case"FETCH_USER_DATA_START":return Se(e);case"FETCH_USER_STORY_START":return Oe(e);case"FETCH_USER_DATA_FAIL":return ye(e,t);case"FETCH_USER_STORY_FAIL":return he(e,t);case"UPDATED_PROFILE":return _e(e,t);case"UPDATED_STORY":return Ne(e,t);case"DELETED_STORY":return Te(e,t);case"ADDED_STORY":return Ie(e,t);default:return e}},Ce=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,ke=Object(u.c)({auth:de,modal:oe,stories:je}),De=Object(u.e)(ke,Ce(Object(u.a)(i.a))),Ue=r.a.createElement(s.a,{store:De},r.a.createElement(l.a,null,r.a.createElement(Z,null)));c.a.render(r.a.createElement(r.a.StrictMode,null,Ue),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.6cfdbd74.chunk.js.map